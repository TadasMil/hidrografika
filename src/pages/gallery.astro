---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';

// Gallery images
const galleryItems = [
  { id: 1, category: 'Automobiliai', title: 'Automobilio Vidaus Apdaila (Prieš/Po)', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Auto+Vidus' },
  { id: 2, category: 'Automobiliai', title: 'Individualios Durų Apdailos', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Duru+Apdaila' },
  { id: 3, category: 'Automobiliai', title: 'Hidrografikos Pavyzdžiai Vidaus Dalims', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Vidaus+Dalys' },
  { id: 4, category: 'Automobiliai', title: 'Dodge Viper Individualus Vidus', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Viper+Vidus' },
  { id: 5, category: 'Automobiliai', title: 'Anglies Pluošto Vidaus Detalė', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Anglies+Pluostas' },
  { id: 6, category: 'Automobiliai', title: 'Medienos Tekstūra Honda Accord', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Mediena+Honda' },
  { id: 7, category: 'Sportas', title: 'Šalmo Hidrografika (Kamufliažas)', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Salmas+Kamufliazas' },
  { id: 8, category: 'Automobiliai', title: 'Variklio Skyriaus Komponentai', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Variklio+Dalis' },
  { id: 9, category: 'Sportas', title: 'Keturračių Dalys', image: 'https://placehold.co/600x400/1a1a1a/06b6d4?text=Keturatis' }
];

const categories = ['Visi', 'Automobiliai', 'Sportas', 'Pramonė'];
---

<Layout
  title="Galerija - Hidrografika"
  description="Naršykite mūsų hidrografikos projektų portfelį, įskaitant automobilio dalis, sportines prekes ir individualius pritaikymus."
>
  <Hero
    title="Mūsų Darbai"
    subtitle="Naršykite mūsų užbaigtų projektų portfelį"
    ctaText={null}
    compact
  />

  <section class="py-16 bg-gray-950">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Category Filter -->
      <div class="flex flex-wrap justify-center gap-3 mb-12">
        {categories.map(category => (
          <button
            type="button"
            class="gallery-filter px-6 py-2 rounded-full bg-gray-800 text-gray-300 hover:bg-cyan-500 hover:text-white transition-all border border-gray-700 font-medium"
            data-category={category}
          >
            {category}
          </button>
        ))}
      </div>

      <!-- Gallery Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {galleryItems.map(item => (
          <article
            class="gallery-item group relative overflow-hidden rounded-lg border border-gray-800 hover:border-cyan-500 transition-all bg-gray-900"
            data-category={item.category}
          >
            <div class="aspect-[4/3] overflow-hidden bg-gray-800">
              <img
                src={item.image}
                alt={item.title}
                class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"
                loading="lazy"
              />
            </div>
            <div class="p-4">
              <span class="text-xs font-semibold text-cyan-400 uppercase tracking-wider">
                {item.category}
              </span>
              <h3 class="text-lg font-bold text-white mt-1">{item.title}</h3>
            </div>
          </article>
        ))}
      </div>

      <!-- Empty State (hidden by default) -->
      <div id="empty-state" class="hidden text-center py-12">
        <p class="text-gray-500 text-lg">Šioje kategorijoje projektų nerasta.</p>
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-16 bg-gray-900">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="text-3xl font-bold text-white mb-4">Pasiruošę Sukurti Savo Individualią Apdailą?</h2>
      <p class="text-xl text-gray-400 mb-8 max-w-2xl mx-auto">
        Aptarkime jūsų projektą ir paverškime viziją realybe.
      </p>
      <a
        href="/contact"
        class="inline-flex items-center px-8 py-4 bg-cyan-500 text-white font-semibold rounded-lg hover:bg-cyan-600 transition-all shadow-lg shadow-cyan-500/30"
      >
        Pradėkite Savo Projektą
      </a>
    </div>
  </section>
</Layout>

<script>
  document.addEventListener('astro:page-load', () => {
    const filters = document.querySelectorAll('.gallery-filter');
    const items = document.querySelectorAll('.gallery-item');
    const emptyState = document.getElementById('empty-state');

    filters.forEach(filter => {
      filter.addEventListener('click', () => {
        const category = filter.getAttribute('data-category');

        // Update active state
        filters.forEach(f => {
          f.classList.remove('bg-cyan-500', 'text-white');
          f.classList.add('bg-gray-800', 'text-gray-300');
        });
        filter.classList.remove('bg-gray-800', 'text-gray-300');
        filter.classList.add('bg-cyan-500', 'text-white');

        // Filter items
        let visibleCount = 0;
        items.forEach(item => {
          const itemCategory = item.getAttribute('data-category');
          if (category === 'Visi' || itemCategory === category) {
            item.classList.remove('hidden');
            visibleCount++;
          } else {
            item.classList.add('hidden');
          }
        });

        // Show/hide empty state
        if (emptyState) {
          if (visibleCount === 0) {
            emptyState.classList.remove('hidden');
          } else {
            emptyState.classList.add('hidden');
          }
        }
      });
    });

    // Set initial active state
    const firstFilter = filters[0];
    if (firstFilter) {
      firstFilter.classList.remove('bg-gray-800', 'text-gray-300');
      firstFilter.classList.add('bg-cyan-500', 'text-white');
    }
  });
</script>
